<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<head>
      <title th:text="List"> List </title>
</head>
<style>
	table {
    border-collapse: collapse;
    width:500px;
	}
	
	table, th, td {
	    border: 1px solid black;
	} 
</style>
<body>
   <h1 th:text="list">List</h1>
   <form id="form">
   	<input type="hidden" id="type" name="type" th:value="${type}">
   	<input type="hidden" id="listNum" name="listNum" th:value="${listNum}">
   </form>
   <form action="#" th:action="@{/todo/list}" th:object="${todo}">
      <table>
    	<tr>
    		<td>검색</td>
    		<td colspan="2">
    		  <input type="text" th:field="*{contents}" th:value="${contents}"/>
              <input type="submit" th:value="검색"/> 
            </td>
        </tr>
      </table>  
    </form>
    <table>
        <tr>
           <th th:text="할일"></th>
           <th th:text="날짜"></th>
           <th th:text="수정-삭제"></th>
        </tr>
        <tr th:each="todo : ${list}">
		  <td th:text="${todo.contents}">Contents</td>	 
		  <td th:text="${#dates.format(todo.cdate, 'yyyy-MM-dd HH:mm:ss')}">Date</td>	 
		  <td colspan="2">
		  	<!--<input type="button" th:onclick="'javascript:modify('+${todo.listnum}+')'" th:value="수정"/> 
		  	<input type="button" th:onclick="'javascript:deleteList('+${todo.listnum}+')'" th:value="삭제"/> -->
		  	<a href="#" th:href="@{/todo/form(listNum=${todo.listnum},type='modify')}" th:text="수정">수정</a>
		  	<a href="#" th:href="@{/todo/form(listNum=${todo.listnum},type='delete')}" th:text="삭제">삭제</a>
		  </td>	   		  
	    </tr>	
	</table>
	<a href="#" th:href="@{/todo/form}" th:text="추가">추가</a>
	
	<!-- <script type="text/javascript">
      function modify(listNum) {
    	  $("#listNum").val(listNum);
    	  $("#type").val("modify");
    	  $("#form").attr("action", "/todo/form");
    	  $("#form").attr("method", "GET");
    	  $("#form").submit();
      }
      
      function deleteList(listNum) {
    	  $.ajax({
   		    url: "/todo/delete?listnum="+listNum, // 클라이언트가 요청을 보낼 서버의 URL 주소
   		    type: "POST",                             // HTTP 요청 방식(GET, POST)
   		    dataType: "json",                       // 서버에서 보내줄 데이터의 타입
   		    contentType: "application/json",
	   		success: function (data) {
			 if(data.result == "success")
				 location.replace('/todo/list');
	        },
	        error: function (e) {
	
	        }
   		})
      }
    </script> -->
</body>
</html> 
